<div class="c-mod-container">
  <!-- Formulario de Peluquería -->
  @if (tipo === 'peluqueria') {
  <div class="form-wrapper">
    <h2 class="bh-texto-primario">Crear Nueva Peluquería</h2>
    <form [formGroup]="peluqueriaForm" (ngSubmit)="onSubmitPeluqueria()">
      <div class="form-group">
        <label for="usuario-peluqueria">Usuario *</label>
        <select id="usuario-peluqueria" formControlName="usuarioId">
          <option value="" disabled selected>Selecciona un usuario</option>
          @for (u of usuarios; track $index) {
          <option [ngValue]="u.id">{{ u.nombre }}</option>
          }
        </select>
      </div>

      <div class="form-group">
        <label for="municipio">Municipio *</label>
        <input type="text" id="municipio" formControlName="municipio" />
      </div>

      <div class="form-group">
        <label for="direccion">Dirección *</label>
        <input type="text" id="direccion" formControlName="direccion" />
      </div>

      <div class="form-group">
        <label for="telefono">Teléfono *</label>
        <input type="tel" id="telefono" formControlName="telefono" />
      </div>

      <div class="form-actions">
        <button type="submit" [disabled]="peluqueriaForm.invalid" class="btn-submit">
          Crear Peluquería
        </button>
        <button type="button" class="btn-cancel" routerLink="/peluquerias">Cancelar</button>
      </div>
    </form>
    <div *ngIf="error" class="mt-2 alert alert-danger">{{ error }}</div>
  </div>
  }

  <!-- Formulario de Categoría -->
  @else if (tipo === 'categoria') {
  <div class="form-wrapper">
    <h2 class="bh-texto-primario">Crear Nueva Categoría</h2>
    <form [formGroup]="categoriaForm" (ngSubmit)="onSubmitCategoria()">
      <div class="form-group">
        <label for="nombre-categoria">Nombre *</label>
        <input type="text" id="nombre-categoria" formControlName="nombre" />
      </div>
      <div class="form-group">
        <label for="descripcion-categoria">Descripción</label>
        <textarea id="descripcion-categoria" formControlName="descripcion" rows="4"></textarea>
      </div>

      <div class="form-actions">
        <button type="submit" [disabled]="categoriaForm.invalid" class="btn-submit">
          Crear Categoría
        </button>
        <button type="button" class="btn-cancel" routerLink="/categorias">Cancelar</button>
      </div>
    </form>
    <div *ngIf="error" class="mt-2 alert alert-danger">{{ error }}</div>
  </div>
  }

  <!-- Formulario de Usuario-->
  @else if(tipo === 'usuario'){
  <div class="form-wrapper">
    <h2 class="bh-texto-primario">Crear Nuevo Usuario</h2>
    <form [formGroup]="usuarioForm" (ngSubmit)="onSubmitUsuario()">
      <div class="form-group">
        <label for="email-usuario">Email *</label>
        <input type="email" id="email-usuario" formControlName="email" />
      </div>
      <div class="form-group">
        <label for="nombre-usuario">Nombre *</label>
        <input type="text" id="nombre-usuario" formControlName="nombre" />
      </div>
      <div class="form-group">
        <label for="contrasenya-usuario">Contraseña *</label>
        <input type="password" id="contrasenya-usuario" formControlName="contrasenya" />
      </div>
      <div class="form-group">
        <label for="rol-usuario">Rol *</label>
        <select id="rol-usuario" formControlName="rol">
          <option value="" disabled selected>Selecciona un rol</option>
          @for (r of roles; track $index) {
          <option [value]="r">{{ r }}</option>
          }
        </select>
      </div>

      <div class="form-actions">
        <button type="submit" [disabled]="usuarioForm.invalid" class="btn-submit">
          Crear Usuario
        </button>
        <button type="button" class="btn-cancel" routerLink="/usuarios">Cancelar</button>
      </div>
    </form>
    <div *ngIf="error" class="mt-2 alert alert-danger">{{ error }}</div>
  </div>
  } @else if(tipo === 'producto'){
  <div class="form-wrapper">
    <h2 class="bh-texto-primario">Crear Nuevo Producto</h2>
    <form [formGroup]="productoForm" (ngSubmit)="onSubmitProducto()">
      <div class="form-group">
        <label for="categoria-producto">Categoria *</label>
        <select id="categoria-producto" formControlName="categoriaId">
          <option value="" disabled selected>Selecciona una categoria</option>
          @for (c of categorias; track $index) {
          <option [value]="c.id">{{ c.nombre }}</option>
          }
        </select>
      </div>
      <div class="form-group">
        <label for="peluqueria-producto">Peluqueria *</label>
        <select id="peluqueria-producto" formControlName="peluqueriaId">
          <option value="" disabled selected>Selecciona una peluqueria</option>
          @for (p of peluquerias; track $index) {
          <option [value]="p.id">{{ p.nombre }}</option>
          }
        </select>
      </div>
      <div class="form-group">
        <label for="nombre-producto">Nombre *</label>
        <input type="text" id="nombre-producto" formControlName="nombre" />
      </div>
      <div class="form-group">
        <label for="precio-producto">Precio (€) *</label>
        <input type="number" id="precio-producto" formControlName="precio" />
      </div>
      <div class="form-group">
        <label for="duracion-producto">Duracion (min) *</label>
        <input type="number" id="duracion-producto" formControlName="duracion" />
      </div>

      <div class="form-actions">
        <button type="submit" [disabled]="productoForm.invalid" class="btn-submit">
          Crear Producto
        </button>
        <button type="button" class="btn-cancel" routerLink="/productos">Cancelar</button>
      </div>
    </form>
    <div *ngIf="error" class="mt-2 alert alert-danger">{{ error }}</div>
  </div>
  }

  <!-- Mensaje si no hay tipo especificado -->
  @if (!tipo) {
  <div class="no-data">
    <p>No se ha especificado qué crear. Por favor, selecciona peluquería o categoría.</p>
  </div>
  }
</div>
